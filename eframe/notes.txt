Scratch
=======

TODO:
======
Up-time and request count.  https://micronaut-projects.github.io/micronaut-micrometer/latest/guide/
  
Gradle       https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_plugin_and_dependency_management
             https://tomgregory.com/gradle-implementation-vs-compile-dependencies/
  compile -> implementation
  testCompile -> testImplementation
  runtime -> runtimeOnly


Tasks
=====
Consider moving to use of status UNAUTHORIZED vs. FORBIDDEN.
Bug - Expired password needs to re-direct to change password page.
Bug - Jasper Reports fails from shadowJar on Debian, JDK 14.
Issue 672 Still broken.  Update project ref-issue to 2.1.3 and verify that it is still broken.
Reports
  Fix issue with date ranges error by TZ offset?
Add workaround for update failure: 299.  Remove sop.
Version and opt locking (custom JDBCOperations).
Cascading updates.  Find some way to prevent? - isDirty or save() option?
Is Repository findByUuid() and findAll() needed?  Use CrudRepository.findById() and .findAll()?

Support cache in specific use cases:
  UserPreferences - timed, any update for user flushed cache? done in PreferenceHolder?
  FieldExtension/GUI - Already cached at the domainUtils level with FieldGUIExtension via ExtensibleFieldHelper
  Others as needed.
Fix mess with efForm.dashboard.  Support type='dashboard', 'buttonHolder' and 'dialog'.

  Support for MPE?
  Check Search in CrudGUITester and add to definition list logic/controller.
  CrudGUITester - combobox - Enum, Domain Ref, Option objects.
  Look into Jackson skipping foreign references.  Only need key and ID fields to import.
  Simplify Client.javascript to one per Controller by default -  Add GUI test of logging level in EFrameJSLoggingGUISpec.
  Add E2E test for optimistic locking detection.  In definition GUIs.
  Add Dashboard editor.
  Add splitter position remember in dashboard.
  Reports
    Test in MES app.
  For Assembled App, strip out test utils (e.g. MESUnitTestUtils, Assy, others).

  Bugs:
    Definition List allows changing boolean checkbox and the checkbox is not centered.
    Definition List shows [Object object] for sub object cases.  User.  Fixable or add -userRoles as supported field list.
    Definition List key field allows HTML un-escaped in it.
    Show Page with name="<script>alert('bad')</script>" fails with Javascript syntax error in SampleParent.
    Edit/Create? page save failures.  Fixing problem and re-saving value gives error (Invalid UUID string: null)
  Look at using https://github.com/apps/whitesource-bolt-for-github for CVE library scanning.
    Others: https://dzone.com/articles/8-free-security-tools-every-developer-should-know


MES Demo Release Requirements
-----------------------------
  Reports
    WIP


MES Core First Pass Predecessors
  

Task Before MES work
  Dashboards/Questions from nested code
  Addition modules
    Global Toggles?
  Themes - Including fixes to 'TBD: Needs different value for theme.' notes.
  Periodic Archiving


UI

Old Notes
==========
Setup
----------
GIT server
  cd /opt/git/smes
  mkdir eframe.git
  cd eframe.git
  git init --bare
MN Create
   cd smes
   mn create-app eframe -l groovy -f spock,hibernate-gorm,management
IDEA
  New Project from Existing Sources (default for all)
  Import Gradle.
  Remove second-level eframe module in IDEA.
  Edit build.gradle (import sources).
  Move Application.groovy to correct package.
GIT Setup
  cd eframe
  git init
  git remote add origin mphouston@s:/opt/git/smes/eframe.git
  git clone ssh://mphouston@s:/opt/git/smes/eframe.git
  Added master section to .git/config


Make Module for Distr.
=====================
Delete from .jar
  Application.class
  logback.xml

UI
==
UI Toolkit Module (two flavors: JQX and HTML).


Notes on Micronaut investigation


Key Missing Features
====================

Persistence - CRUD and ad-hoc
  Txn
  Foreign Keys
Message Broker (with Saga/undo support)
Custom Fields
Client Asset delivery/gzip/etc
UI Layer - tags?
Modules (e.g. plugins)

Key Decisions
=============
Persistence
UI
Single mini-service or multiple?  UI inside service?
Graal is not supported with Hibernate now.   Ignore Graal for now.

Modules
=======
eframe (library) only
  org.simplemes.eframe.*
  /opt/git/mmes/eframe.git
mes-core
mes-assy
mes (appl)

Module JAR Support
==================
compile "org.simplemes:eframe"
Provides:
  Controllers
  Views
  Security Providers
  Domains
Dependencies:
  compile "io.micronaut:micronaut-security-jwt"



Package structure
=================
Option 1 org.simplemes.eframe
  application  (startup and common pages "/")
    controller
    domain
    service
  auth
    controller
    domain
  controller
  custom
    controller
    domain
  domain
  auth
    controller
    domain
  misc
  system
  test
  web
    request
    view
    builder
    widget


std layout
----------
  XYZ
    controller
    domain
    service
    page (GEB in test module)

views structure
===============
views
  auth/loginAuth, denied
  home/index
  includes
    header.hbs
src/assets
  css
  javascript
  images


Groovy vs. Kotlin
=================

Groovy is clearer.
GORM vs. JPA vs. Kotlin Expose



UI Decision
===========
JQX or Other Toolkit?
Toolkit Module?
Webix Notes:
  Look at https://snippet.webix.com/309867f6 for replacing sections of a page (e.g. dashboard) and form layout
  Look at https://snippet.webix.com/5e25f570 for form layout.
  https://snippet.webix.com/a674ca30 - Simulate a real login form.
  Input fields have unique ID generated.  Not easy to test.  $('#field') vs. $('div', view_id: 'field').find('input').  Module?
    Uses in Page: field { module(new InputFieldModule(id: 'field')) }
  Forms can't be submitted like normal.  Need JS code.
  Consider white-listing function calls in dynamic pages?

Webix Dashboard Activity Example
================================
     dash.y = function() {
       console.log("y()")
     };
     _json = {
       view: "button", value: "List", type: "form", click: "dash.y();", width: tk.width('33%')
     };

Page Mockups
============
  static content = {
    startButton {module(new ButtonModule(id: 'start'))}  //{ $('div', view_id: 'start').find('button')}
    panelA { $('div', view_id: 'PanelA')}
    panelB { $('div', view_id: 'PanelB')}
    resizer { $('div', view_id: 'resizerA')}
    //startButton { $('div', view_id: 'start')}  // Works
    //startButton { $('button')}  // adding view_id takes extra 32ms to find element.
  }




Needs
-----
Theme?
GEB Testable
Grid for inline editing.
  Resizable columns
  Sort order
  Hide column
Table - Display only
  Paging Support
  Resizable columns
  Sort order
  Hide column
Tree
  TaskMenu
  Logging
Splitter
Dialog - Modal
Widgets
  Date/Time
  Single/Multi-select Combobox with completion
Replaceable content with logic.


